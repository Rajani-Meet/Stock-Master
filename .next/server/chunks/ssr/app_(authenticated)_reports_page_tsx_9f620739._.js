module.exports=[47623,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(87682),g=a.i(5522),h=a.i(17171),i=a.i(39761),j=a.i(24669),k=a.i(83497),l=a.i(90669);let m=(0,a.i(70106).default)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var n=a.i(4720);function o(){let[a,o]=(0,c.useState)("inventory"),[p,q]=(0,c.useState)({warehouseId:"all",categoryId:"all",dateFrom:"",dateTo:""}),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]);(0,c.useEffect)(()=>{Promise.all([fetch("/api/warehouses").then(a=>a.json()),fetch("/api/categories").then(a=>a.json())]).then(([a,b])=>{w(a||[]),y(b.data||[])})},[]);let z=async(b=!1)=>{u(!0);try{let c=new URLSearchParams;Object.entries(p).forEach(([a,b])=>{b&&"all"!==b&&c.append(a,b)}),b&&c.append("sendEmail","true");let d=await fetch(`/api/reports/${a}?${c}`),e=await d.json();s(e),b&&e.success&&alert("Report generated and sent to your email!")}catch(a){console.error("Failed to generate report:",a)}finally{u(!1)}},A=async b=>{try{let c=new URLSearchParams;Object.entries(p).forEach(([a,b])=>{b&&"all"!==b&&c.append(a,b)}),c.append("format",b);let d=await fetch(`/api/reports/${a}/download?${c}`),e=await d.blob(),f=window.URL.createObjectURL(e),g=document.createElement("a");g.href=f,g.download=`${a}-report-${new Date().toISOString().split("T")[0]}.${b}`,document.body.appendChild(g),g.click(),window.URL.revokeObjectURL(f),document.body.removeChild(g)}catch(a){console.error("Failed to download report:",a)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-2xl flex items-center justify-center",children:(0,b.jsx)(i.BarChart3,{className:"w-6 h-6 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Analytics"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Generate and download comprehensive reports"})]})]}),r&&(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{onClick:()=>A("csv"),variant:"outline",className:"gap-2",children:[(0,b.jsx)(m,{className:"w-4 h-4"}),"CSV"]}),(0,b.jsxs)(e.Button,{onClick:()=>A("pdf"),variant:"outline",className:"gap-2",children:[(0,b.jsx)(n.FileText,{className:"w-4 h-4"}),"PDF"]})]})]}),(0,b.jsxs)(d.Card,{className:"bg-white rounded-2xl shadow-lg border-0",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-gray-900",children:"Generate Report"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Report Type"}),(0,b.jsxs)(f.Select,{value:a,onValueChange:o,children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"inventory",children:"Inventory Report"}),(0,b.jsx)(f.SelectItem,{value:"movements",children:"Stock Movements"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Warehouse"}),(0,b.jsxs)(f.Select,{value:p.warehouseId,onValueChange:a=>q({...p,warehouseId:a}),children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{placeholder:"All warehouses"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"All"}),v.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:a.name},a.id))]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Category"}),(0,b.jsxs)(f.Select,{value:p.categoryId,onValueChange:a=>q({...p,categoryId:a}),children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{placeholder:"All categories"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"All"}),x.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{onClick:z,disabled:t,className:"mt-6",children:t?"Generating...":"Generate Report"}),(0,b.jsx)(e.Button,{onClick:()=>z(!0),disabled:t,variant:"outline",className:"mt-6",children:"Generate & Email"})]})]}),"movements"===a&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"From Date"}),(0,b.jsx)(g.Input,{type:"date",value:p.dateFrom,onChange:a=>q({...p,dateFrom:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"To Date"}),(0,b.jsx)(g.Input,{type:"date",value:p.dateTo,onChange:a=>q({...p,dateTo:a.target.value})})]})]})]})]}),r&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:"inventory"===a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(d.Card,{className:"bg-white rounded-2xl shadow-lg border-0",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Total Products"}),(0,b.jsx)(k.Package,{className:"w-4 h-4 text-blue-600"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r.summary?.totalProducts||0})})]}),(0,b.jsxs)(d.Card,{className:"bg-white rounded-2xl shadow-lg border-0",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Total Value"}),(0,b.jsx)(j.TrendingUp,{className:"w-4 h-4 text-green-600"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["$",r.summary?.totalValue||0]})})]}),(0,b.jsxs)(d.Card,{className:"bg-white rounded-2xl shadow-lg border-0",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),(0,b.jsx)(i.BarChart3,{className:"w-4 h-4 text-yellow-600"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:r.summary?.lowStockCount||0})})]}),(0,b.jsxs)(d.Card,{className:"bg-white rounded-2xl shadow-lg border-0",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),(0,b.jsx)(l.Activity,{className:"w-4 h-4 text-red-600"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:r.summary?.outOfStockCount||0})})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(d.Card,{className:"bg-white rounded-2xl shadow-lg border-0",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Total Movements"}),(0,b.jsx)(l.Activity,{className:"w-4 h-4 text-blue-600"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r.summary?.totalMovements||0})})]}),(0,b.jsxs)(d.Card,{className:"bg-white rounded-2xl shadow-lg border-0",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Inbound"}),(0,b.jsx)(j.TrendingUp,{className:"w-4 h-4 text-green-600"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:r.summary?.inbound||0})})]}),(0,b.jsxs)(d.Card,{className:"bg-white rounded-2xl shadow-lg border-0",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Outbound"}),(0,b.jsx)(i.BarChart3,{className:"w-4 h-4 text-yellow-600"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:r.summary?.outbound||0})})]}),(0,b.jsxs)(d.Card,{className:"bg-white rounded-2xl shadow-lg border-0",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Adjustments"}),(0,b.jsx)(k.Package,{className:"w-4 h-4 text-purple-600"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r.summary?.adjustments||0})})]})]})}),(0,b.jsxs)(d.Card,{className:"bg-white rounded-2xl shadow-lg border-0",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-gray-900",children:"Details"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsx)("tr",{className:"border-b",children:"inventory"===a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"text-left py-2",children:"Product"}),(0,b.jsx)("th",{className:"text-left py-2",children:"SKU"}),(0,b.jsx)("th",{className:"text-left py-2",children:"Location"}),(0,b.jsx)("th",{className:"text-left py-2",children:"Quantity"}),(0,b.jsx)("th",{className:"text-left py-2",children:"Status"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"text-left py-2",children:"Date"}),(0,b.jsx)("th",{className:"text-left py-2",children:"Product"}),(0,b.jsx)("th",{className:"text-left py-2",children:"Type"}),(0,b.jsx)("th",{className:"text-left py-2",children:"Quantity"}),(0,b.jsx)("th",{className:"text-left py-2",children:"Location"})]})})}),(0,b.jsx)("tbody",{children:("inventory"===a?r.details:r.movements)?.slice(0,50).map((c,d)=>(0,b.jsx)("tr",{className:"border-b",children:"inventory"===a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"py-2",children:c.product?.name}),(0,b.jsx)("td",{className:"py-2 font-mono text-xs",children:c.product?.sku}),(0,b.jsx)("td",{className:"py-2",children:c.location?.name}),(0,b.jsx)("td",{className:"py-2",children:c.quantity}),(0,b.jsx)("td",{className:"py-2",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs ${0===c.quantity?"bg-red-100 text-red-600":c.quantity<=c.product?.minStockLevel?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:0===c.quantity?"Out of Stock":c.quantity<=c.product?.minStockLevel?"Low Stock":"In Stock"})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"py-2",children:new Date(c.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"py-2",children:c.product?.name}),(0,b.jsx)("td",{className:"py-2",children:c.moveType}),(0,b.jsx)("td",{className:"py-2",children:c.quantity}),(0,b.jsx)("td",{className:"py-2",children:c.location?.name})]})},d))})]})})})]})]})]})}a.s(["default",()=>o],47623)}];

//# sourceMappingURL=app_%28authenticated%29_reports_page_tsx_9f620739._.js.map