module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},81464,a=>{"use strict";let b=(0,a.i(70106).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);a.s(["Filter",()=>b],81464)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},60531,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(87682),h=a.i(54161),i=a.i(15618),j=a.i(87532),k=a.i(81464),l=a.i(83497),m=a.i(65733),n=a.i(17171);function o({open:a,onClose:d,onSuccess:h}){let[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)({name:"",sku:"",categoryId:"",unit:"UNIT",description:"",minStockLevel:10,reorderQty:50}),[o,p]=(0,c.useState)(!1);(0,c.useEffect)(()=>{a&&fetch("/api/categories").then(a=>a.json()).then(a=>j(a.data||[]))},[a]);let q=async a=>{a.preventDefault(),p(!0);try{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)})).ok&&(h(),d(),l({name:"",sku:"",categoryId:"",unit:"UNIT",description:"",minStockLevel:10,reorderQty:50}))}catch(a){console.error("Failed to create product:",a)}finally{p(!1)}};return(0,b.jsx)(m.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(m.DialogContent,{children:[(0,b.jsx)(m.DialogHeader,{children:(0,b.jsx)(m.DialogTitle,{children:"Add Product"})}),(0,b.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(n.Label,{children:"Name"}),(0,b.jsx)(f.Input,{value:k.name,onChange:a=>l({...k,name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.Label,{children:"SKU"}),(0,b.jsx)(f.Input,{value:k.sku,onChange:a=>l({...k,sku:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.Label,{children:"Category"}),(0,b.jsxs)(g.Select,{value:k.categoryId,onValueChange:a=>l({...k,categoryId:a}),children:[(0,b.jsx)(g.SelectTrigger,{children:(0,b.jsx)(g.SelectValue,{placeholder:"Select category"})}),(0,b.jsx)(g.SelectContent,{children:i.map(a=>(0,b.jsx)(g.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(n.Label,{children:"Unit"}),(0,b.jsxs)(g.Select,{value:k.unit,onValueChange:a=>l({...k,unit:a}),children:[(0,b.jsx)(g.SelectTrigger,{children:(0,b.jsx)(g.SelectValue,{})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"UNIT",children:"Unit"}),(0,b.jsx)(g.SelectItem,{value:"KG",children:"KG"}),(0,b.jsx)(g.SelectItem,{value:"L",children:"Liter"}),(0,b.jsx)(g.SelectItem,{value:"M",children:"Meter"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(n.Label,{children:"Min Stock"}),(0,b.jsx)(f.Input,{type:"number",value:k.minStockLevel,onChange:a=>l({...k,minStockLevel:+a.target.value})})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:d,children:"Cancel"}),(0,b.jsx)(e.Button,{type:"submit",disabled:o,children:"Create"})]})]})]})})}function p(){let[a,m]=(0,c.useState)([]),[n,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)({category:"all",unit:"all",lowStock:!1,sortBy:"name",sortOrder:"asc"}),y=async()=>{try{let a=new URLSearchParams;q&&a.append("search",q),"all"!==w.category&&a.append("category",w.category),"all"!==w.unit&&a.append("unit",w.unit),w.lowStock&&a.append("lowStock","true"),a.append("sortBy",w.sortBy),a.append("sortOrder",w.sortOrder);let b=await fetch(`/api/products?${a}`),c=await b.json();m(c.data||[])}catch(a){console.error("Failed to fetch products:",a)}finally{p(!1)}},z=async()=>{try{let a=await fetch("/api/categories"),b=await a.json();v(b.data||[])}catch(a){console.error("Failed to fetch categories:",a)}};(0,c.useEffect)(()=>{z()},[]),(0,c.useEffect)(()=>{y()},[q,w]);let A=a=>{let b=a.stockLevels?.reduce((a,b)=>a+b.quantity,0)||0;return 0===b?{status:"Out of Stock",variant:"destructive"}:b<=a.minStockLevel?{status:"Low Stock",variant:"warning"}:{status:"In Stock",variant:"success"}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Products"}),(0,b.jsxs)(e.Button,{className:"gap-2",onClick:()=>t(!0),children:[(0,b.jsx)(i.Plus,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Add Product"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Add"})]})]}),(0,b.jsx)(o,{open:s,onClose:()=>t(!1),onSuccess:y}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,b.jsx)(j.Search,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)(f.Input,{type:"text",placeholder:"Search by name, SKU, or description...",value:q,onChange:a=>r(a.target.value),className:"flex-1"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,b.jsxs)(g.Select,{value:w.category,onValueChange:a=>x({...w,category:a}),children:[(0,b.jsx)(g.SelectTrigger,{className:"w-full sm:w-40",children:(0,b.jsx)(g.SelectValue,{placeholder:"All Categories"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"all",children:"All Categories"}),u.map(a=>(0,b.jsx)(g.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)(g.Select,{value:w.unit,onValueChange:a=>x({...w,unit:a}),children:[(0,b.jsx)(g.SelectTrigger,{className:"w-full sm:w-32",children:(0,b.jsx)(g.SelectValue,{placeholder:"All Units"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"all",children:"All Units"}),(0,b.jsx)(g.SelectItem,{value:"UNIT",children:"Unit"}),(0,b.jsx)(g.SelectItem,{value:"KG",children:"KG"}),(0,b.jsx)(g.SelectItem,{value:"L",children:"Liter"}),(0,b.jsx)(g.SelectItem,{value:"M",children:"Meter"})]})]}),(0,b.jsxs)(e.Button,{variant:w.lowStock?"default":"outline",onClick:()=>x({...w,lowStock:!w.lowStock}),className:"gap-2 w-full sm:w-auto",children:[(0,b.jsx)(k.Filter,{className:"w-4 h-4"}),"Low Stock"]})]})]})}),(0,b.jsx)(d.CardContent,{children:n?(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"Loading products..."}):0===a.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(l.Package,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No products found"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"block sm:hidden space-y-4",children:a.map(a=>{let c=A(a),d=a.stockLevels?.reduce((a,b)=>a+b.quantity,0)||0;return(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-mono",children:a.sku})]}),(0,b.jsx)(h.Badge,{variant:c.variant,children:c.status})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Category:"}),(0,b.jsx)("p",{children:a.category?.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Unit:"}),(0,b.jsx)("p",{children:a.unit})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Stock:"}),(0,b.jsx)("p",{className:"font-medium",children:d})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Min Level:"}),(0,b.jsx)("p",{children:a.minStockLevel})]})]})]},a.id)})}),(0,b.jsx)("div",{className:"hidden sm:block overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsxs)("th",{className:"text-left py-3 px-4 font-medium cursor-pointer hover:bg-muted/50",onClick:()=>x({...w,sortBy:"name",sortOrder:"name"===w.sortBy&&"asc"===w.sortOrder?"desc":"asc"}),children:["Name ","name"===w.sortBy&&("asc"===w.sortOrder?"↑":"↓")]}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"SKU"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Category"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Unit"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Stock Level"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Status"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Min Level"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>{let c=A(a),d=a.stockLevels?.reduce((a,b)=>a+b.quantity,0)||0;return(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-foreground/5",children:[(0,b.jsx)("td",{className:"py-3 px-4 font-medium",children:a.name}),(0,b.jsx)("td",{className:"py-3 px-4 font-mono text-xs",children:a.sku}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.category?.name}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.unit}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:d}),a.stockLevels?.length>0&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[a.stockLevels.length," location",a.stockLevels.length>1?"s":""]})]})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)(h.Badge,{variant:c.variant,children:c.status})}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.minStockLevel})]},a.id)})})]})})]})})]})]})}a.s(["default",()=>p],60531)}];

//# sourceMappingURL=_1cc66152._.js.map