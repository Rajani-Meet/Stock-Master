module.exports=[81464,a=>{"use strict";let b=(0,a.i(70106).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);a.s(["Filter",()=>b],81464)},77156,a=>{"use strict";let b=(0,a.i(70106).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},55087,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(87682),i=a.i(81464),j=a.i(62213),j=j;function k({onFilter:a,type:k}){let[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)({status:"all",warehouseId:"all",categoryId:"all",dateFrom:"",dateTo:""});return((0,c.useEffect)(()=>{Promise.all([fetch("/api/warehouses").then(a=>a.json()),fetch("/api/categories").then(a=>a.json())]).then(([a,b])=>{o(a.data||[]),q(b.data||[])})},[]),l)?(0,b.jsxs)(d.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm",children:"Filters"}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:(0,b.jsx)(j.default,{className:"w-4 h-4"})})]}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:["products"!==k&&(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Status"}),(0,b.jsxs)(h.Select,{value:r.status,onValueChange:a=>s({...r,status:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"All statuses"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All"}),(()=>{switch(k){case"receipts":return["DRAFT","WAITING","VALIDATED","CANCELLED"];case"deliveries":return["DRAFT","READY","DONE","CANCELLED"];case"transfers":return["DRAFT","WAITING","READY","DONE","CANCELLED"];default:return[]}})().map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Warehouse"}),(0,b.jsxs)(h.Select,{value:r.warehouseId,onValueChange:a=>s({...r,warehouseId:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"All warehouses"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All"}),n.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Category"}),(0,b.jsxs)(h.Select,{value:r.categoryId,onValueChange:a=>s({...r,categoryId:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"All categories"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All"}),p.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"From Date"}),(0,b.jsx)(f.Input,{type:"date",value:r.dateFrom,onChange:a=>s({...r,dateFrom:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"To Date"}),(0,b.jsx)(f.Input,{type:"date",value:r.dateTo,onChange:a=>s({...r,dateTo:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{onClick:()=>{a(Object.fromEntries(Object.entries(r).filter(([a,b])=>""!==b&&"all"!==b))),m(!1)},className:"flex-1",children:"Apply"}),(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>{s({status:"all",warehouseId:"all",categoryId:"all",dateFrom:"",dateTo:""}),a({})},children:"Clear"})]})]})]}):(0,b.jsxs)(e.Button,{variant:"outline",onClick:()=>m(!0),className:"gap-2",children:[(0,b.jsx)(i.Filter,{className:"w-4 h-4"}),"Filters"]})}a.s(["default",()=>k],55087)},24987,a=>{"use strict";let b=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},99407,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(54161),g=a.i(15618),h=a.i(32860),i=a.i(77156),j=a.i(24987),k=a.i(65733),l=a.i(5522),m=a.i(17171),n=a.i(87682),o=a.i(81560);function p({open:a,onClose:d,onSuccess:f}){let[h,i]=(0,c.useState)([]),[j,p]=(0,c.useState)([]),[q,r]=(0,c.useState)({fromLocationId:"",toLocationId:"",transferDate:new Date().toISOString().split("T")[0],notes:"",items:[{productId:"",quantity:1}]}),[s,t]=(0,c.useState)(!1);(0,c.useEffect)(()=>{a&&Promise.all([fetch("/api/locations").then(a=>a.json()),fetch("/api/products").then(a=>a.json())]).then(([a,b])=>{i(a.data||[]),p(b.data||[])})},[a]);let u=(a,b,c)=>{let d=[...q.items];d[a]={...d[a],[b]:c},r({...q,items:d})},v=async a=>{a.preventDefault(),t(!0);try{(await fetch("/api/transfers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).ok&&(f(),d(),r({fromLocationId:"",toLocationId:"",transferDate:new Date().toISOString().split("T")[0],notes:"",items:[{productId:"",quantity:1}]}))}catch(a){console.error("Failed to create transfer:",a)}finally{t(!1)}};return(0,b.jsx)(k.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,b.jsx)(k.DialogHeader,{children:(0,b.jsx)(k.DialogTitle,{children:"Internal Transfer"})}),(0,b.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{children:"From Location"}),(0,b.jsxs)(n.Select,{value:q.fromLocationId,onValueChange:a=>r({...q,fromLocationId:a}),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{placeholder:"Select from location"})}),(0,b.jsx)(n.SelectContent,{children:h.map(a=>(0,b.jsx)(n.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{children:"To Location"}),(0,b.jsxs)(n.Select,{value:q.toLocationId,onValueChange:a=>r({...q,toLocationId:a}),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{placeholder:"Select to location"})}),(0,b.jsx)(n.SelectContent,{children:h.filter(a=>a.id!==q.fromLocationId).map(a=>(0,b.jsx)(n.SelectItem,{value:a.id,children:a.name},a.id))})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{children:"Transfer Date"}),(0,b.jsx)(l.Input,{type:"date",value:q.transferDate,onChange:a=>r({...q,transferDate:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(m.Label,{children:"Items"}),(0,b.jsx)(e.Button,{type:"button",size:"sm",onClick:()=>{r({...q,items:[...q.items,{productId:"",quantity:1}]})},children:(0,b.jsx)(g.Plus,{className:"w-4 h-4"})})]}),q.items.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 mb-2",children:[(0,b.jsx)("div",{className:"col-span-8",children:(0,b.jsxs)(n.Select,{value:a.productId,onValueChange:a=>u(c,"productId",a),children:[(0,b.jsx)(n.SelectTrigger,{children:(0,b.jsx)(n.SelectValue,{placeholder:"Product"})}),(0,b.jsx)(n.SelectContent,{children:j.map(a=>(0,b.jsx)(n.SelectItem,{value:a.id,children:a.name},a.id))})]})}),(0,b.jsx)("div",{className:"col-span-3",children:(0,b.jsx)(l.Input,{type:"number",placeholder:"Quantity",value:a.quantity,onChange:a=>u(c,"quantity",+a.target.value)})}),(0,b.jsx)("div",{className:"col-span-1",children:(0,b.jsx)(e.Button,{type:"button",size:"sm",variant:"outline",onClick:()=>{r({...q,items:q.items.filter((a,b)=>b!==c)})},children:(0,b.jsx)(o.Trash2,{className:"w-4 h-4"})})})]},c))]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{children:"Notes"}),(0,b.jsx)(l.Input,{value:q.notes,onChange:a=>r({...q,notes:a.target.value})})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:d,children:"Cancel"}),(0,b.jsx)(e.Button,{type:"submit",disabled:s,children:"Create Transfer"})]})]})]})})}var q=a.i(55087);function r(){let[a,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)({}),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)([]),v=async()=>{try{let a=new URLSearchParams;Object.entries(n).forEach(([b,c])=>{c&&a.append(b,c)});let b=await fetch(`/api/transfers?${a}`),c=await b.json();k(c.transfers||[])}catch(a){console.error("Failed to fetch transfers:",a),k([])}finally{m(!1)}},w=async()=>{try{let a=await fetch("/api/locations"),b=await a.json();u(b.data||[])}catch(a){console.error("Failed to fetch locations:",a)}};(0,c.useEffect)(()=>{w()},[]),(0,c.useEffect)(()=>{v()},[n]);let x=async(a,b)=>{try{(await fetch("/api/transfers",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({transferId:a,status:b})})).ok&&v()}catch(a){console.error("Failed to update transfer status:",a)}},y=a=>({DRAFT:"WAITING",WAITING:"READY",READY:"DONE"})[a],z=a=>t.find(b=>b.id===a)?.name||"Unknown Location";return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Internal Transfers"}),(0,b.jsxs)(e.Button,{className:"gap-2",onClick:()=>s(!0),children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"Create Transfer"]})]}),(0,b.jsx)(p,{open:r,onClose:()=>s(!1),onSuccess:v}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[(0,b.jsx)(q.default,{onFilter:o,type:"transfers"}),(0,b.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,b.jsxs)(f.Badge,{variant:"outline",children:["Total: ",a.length]}),(0,b.jsxs)(f.Badge,{variant:"secondary",children:["Draft: ",a.filter(a=>"DRAFT"===a.status).length]}),(0,b.jsxs)(f.Badge,{variant:"warning",children:["Waiting: ",a.filter(a=>"WAITING"===a.status).length]}),(0,b.jsxs)(f.Badge,{variant:"success",children:["Done: ",a.filter(a=>"DONE"===a.status).length]})]})]})}),(0,b.jsx)(d.CardContent,{children:l?(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"Loading transfers..."}):0===a.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(h.ArrowRight,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No transfers found"})]}):(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-border hover:bg-foreground/5 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,b.jsx)(h.ArrowRight,{className:"w-5 h-5 text-primary"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:a.transferNo}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[(0,b.jsx)(j.MapPin,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:z(a.fromLocationId)}),(0,b.jsx)(h.ArrowRight,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:z(a.toLocationId)})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.Badge,{variant:{DRAFT:"secondary",WAITING:"warning",READY:"default",DONE:"success",CANCELLED:"destructive"}[a.status]||"secondary",children:a.status}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(e.Button,{size:"sm",variant:"outline",children:(0,b.jsx)(i.Eye,{className:"w-4 h-4"})}),y(a.status)&&(0,b.jsx)(e.Button,{size:"sm",onClick:()=>x(a.id,y(a.status)),children:"WAITING"===y(a.status)?"Submit":"READY"===y(a.status)?"Approve":"Complete"})]})]})]}),(0,b.jsxs)("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Items"}),(0,b.jsx)("p",{className:"font-medium",children:a.items?.length||0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Total Quantity"}),(0,b.jsx)("p",{className:"font-medium",children:a.items?.reduce((a,b)=>a+b.quantity,0)||0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Transfer Date"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(a.transferDate).toLocaleDateString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Created"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(a.createdAt).toLocaleDateString()})]})]}),a.notes&&(0,b.jsxs)("div",{className:"mt-2 p-2 bg-muted/50 rounded text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Notes: "}),a.notes]})]},a.id))})})]})]})}a.s(["default",()=>r],99407)}];

//# sourceMappingURL=_d666ddf0._.js.map